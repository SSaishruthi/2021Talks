---
title: "Sustainable Reporting in R"
author: "Lindsey Dietz, PhD"
date: "noRth 2021 (September 29, 2021)"
output: 
  xaringan::moon_reader:
    nature:
        titleSlideClass: ["left", "top", "my-title"]
    css: [default, metropolis, useR-fonts]

---

# Disclaimer

The views expressed in this presentation are strictly my own. They do not necessarily represent the position of the Federal Reserve Bank of Minneapolis or the Federal Reserve System.

---

# Goal of this tutorial

Introduce R tools that help you communicate a data story in a professional, sustainable, and beautiful way. 

![Updated from Grolemund & Wickham's classis R4DS schematic, envisioned by Dr. Julia Lowndes for her 2019 useR! keynote talk and illustrated by Allison Horst.](environmental-data-science-r4ds-general.png)
---

# In this tutorial

- How to set up your R ecosystem to support report creation
- Review of best practices to engage your report viewers
- Briefly introduction to table and graphics packages to support analysis
- Hands on production of an example HTML report
- Hands on production of an example PDF report

---

# Not in this tutorial

>- Shiny - we are going to focus on HTML (primary) and PDF (secondary) reports
>- Details of the tables or graphics packages - these could easily be their own tutorials

The good news is several speakers tomorrow will cover Shiny and other graphics applications!

---

# Older process of reporting

- Do analysis in one tool (R)
- Make tables and charts in another tool (Excel)
- Paste everything into a text editor (Word)
- Turn it into a final product (PDF)

---

# Organizing your R ecosystem
![Artwork by @allison_horst](reproducibility_court.png)

---

# Step 1. Create workflows that shred
![Artwork by @allison_horst](cracked_setwd.png)
---

# R Project 

R projects define your working directories. This helps keeps paths relative rather than fixed. This makes your work portable and allows you to keep things tidy. 

---

# Step 2. Embrace the magic of R Markdown
.center[![Artwork by @allison_horst](rmarkdown_wizards.png)]

---

# What is R Markdown?

Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

- YAML Header
- Code chunks
- Markdown/LaTeX

---

# Step 3. Build your content - tables

There are many table packages. For HTML: `DT` and `reactable` are good starting points. For pdf, `kableExtra` is the gold standard.

.center[![Artwork by @allison_horst](tidydata_7.jpg)]

---

# Step 4. Build your content - plots

`ggplot2` works great as a static graphics package. For interactive graphics, use `plotly` or `highcharter`.

.center[![Artwork by @allison_horst](presenting_monster.png)]

---

# Tips

 - Keep longer R scripts separate from R markdown file
   + Consider outputting summary data set to avoid longer processes when you load a report
 - Use parameters in your R markdown file to make it more timeless
 - Don't try to fit too much into one report - store different reports in the same folder if it makes sense

---

# UX principles for reporting (and almost anything else)

Your report should:

 - Meet the usersâ€™ needs 
 - Have a clear hierarchy that makes navigation natural
 - Understand and embrace accessibility - did you know 1 in 12 men are colorblind?
 - Maintain time consistency - transition to or away from ideas slowly
 - Have a narrative - tell a story with your design
 
---

# References and Thanks

 - Amazing artwork by @allison_horst sourced from: https://github.com/allisonhorst/stats-illustrations
 - First page artwork credit: "Updated from Grolemund & Wickham's classis R4DS schematic, envisioned by Dr. Julia Lowndes for her 2019 useR! keynote talk and illustrated by Allison Horst."
